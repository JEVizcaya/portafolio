<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Mobile Chat Position - Jorge Vizcaya</title>
    <link rel="stylesheet" href="assets/css/chat.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        
        .mobile-test-container {
            max-width: 400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-header h1 {
            margin: 0;
            font-size: 1.8rem;
            background: linear-gradient(45deg, #fff, #f0f0f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .position-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .position-info h3 {
            margin-top: 0;
            color: #ffd700;
        }
        
        .position-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }
        
        .position-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }
        
        .position-item strong {
            color: #ffd700;
            display: block;
            margin-bottom: 5px;
        }
        
        .test-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: transform 0.2s;
            margin: 5px;
            width: 100%;
        }
        
        .test-button:hover {
            transform: translateY(-2px);
        }
        
        .viewport-info {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #ffd700;
        }
        
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-good { background: #4CAF50; }
        .status-warning { background: #FF9800; }
        
        .improvement-note {
            background: rgba(76, 175, 80, 0.1);
            border: 1px solid rgba(76, 175, 80, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .improvement-note h3 {
            color: #4CAF50;
            margin-top: 0;
        }
        
        /* Simular elementos de la p√°gina principal */
        .nav-sim {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 70px;
            background: rgba(0, 0, 0, 0.3);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .back-to-top-sim {
            position: fixed;
            top: 25px;
            right: 25px;
            background: #667eea;
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .content-padding {
            padding-top: 90px;
        }
        
        @media (max-width: 768px) {
            .mobile-test-container {
                margin: 10px;
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Simulation -->
    <div class="nav-sim">
        <i class="fas fa-bars"></i>
        <span style="margin-left: 10px;">Navigation Simulation</span>
    </div>
    
    <!-- Back to Top Button Simulation -->
    <button class="back-to-top-sim" title="Back to Top">
        <i class="fas fa-arrow-up"></i>
    </button>

    <div class="content-padding">
        <div class="mobile-test-container">
            <div class="test-header">
                <h1><i class="fas fa-mobile-alt"></i> Mobile Chat Position Test</h1>
                <p>Prueba de posici√≥n mejorada del chat en m√≥viles</p>
            </div>

            <!-- Improvement Note -->
            <div class="improvement-note">
                <h3><i class="fas fa-rocket"></i> Mejora Implementada</h3>
                <p><strong>Problema resuelto:</strong> El cuadro de escribir del chat ahora es completamente visible en dispositivos m√≥viles.</p>
                <ul style="margin: 10px 0; padding-left: 20px;">
                    <li>‚úÖ Bot√≥n del chat movido m√°s arriba</li>
                    <li>‚úÖ Chat desplegado m√°s visible</li>
                    <li>‚úÖ √Årea de escritura accesible</li>
                    <li>‚úÖ Mejor experiencia m√≥vil</li>
                </ul>
            </div>

            <!-- Current Position Info -->
            <div class="position-info">
                <h3><span class="status-indicator status-good"></span>Nuevas Posiciones</h3>
                <div class="position-grid">
                    <div class="position-item">
                        <strong>Desktop</strong>
                        <div>Top: 174px</div>
                        <div>(Sin cambios)</div>
                    </div>
                    <div class="position-item">
                        <strong>Tablet</strong>
                        <div>Top: 120px</div>
                        <div style="color: #4CAF50;">‚Üë Mejorado</div>
                    </div>
                    <div class="position-item">
                        <strong>Mobile</strong>
                        <div>Top: 100px</div>
                        <div style="color: #4CAF50;">‚Üë Mejorado</div>
                    </div>
                    <div class="position-item">
                        <strong>Small Mobile</strong>
                        <div>Top: 60px</div>
                        <div style="color: #4CAF50;">‚Üë Mucho mejor</div>
                    </div>
                </div>
            </div>

            <!-- Viewport Information -->
            <div class="viewport-info">
                <h3>üì± Informaci√≥n del Viewport</h3>
                <p><strong>Ancho:</strong> <span id="viewport-width">-</span>px</p>
                <p><strong>Alto:</strong> <span id="viewport-height">-</span>px</p>
                <p><strong>Breakpoint:</strong> <span id="breakpoint">-</span></p>
                <p><strong>Orientaci√≥n:</strong> <span id="orientation">-</span></p>
            </div>

            <!-- Position Details -->
            <div class="position-info">
                <h3><span class="status-indicator status-good"></span>Detalles de Posicionamiento</h3>
                <p><strong>Chat Container Height:</strong></p>
                <div class="position-grid">
                    <div class="position-item">
                        <strong>‚â§768px</strong>
                        <div>calc(100vh - 160px)</div>
                        <div>Chat Top: 80px</div>
                    </div>
                    <div class="position-item">
                        <strong>‚â§480px</strong>
                        <div>calc(100vh - 140px)</div>
                        <div>Chat Top: 60px</div>
                    </div>
                </div>
                <p style="margin-top: 15px; font-size: 14px; color: #ccc;">
                    <i class="fas fa-info-circle"></i> 
                    Esto asegura que el cuadro de escribir est√© siempre visible y accesible.
                </p>
            </div>

            <!-- Test Controls -->
            <div class="position-info">
                <h3><i class="fas fa-play-circle"></i> Pruebas</h3>
                <button class="test-button" onclick="openChatTest()">
                    <i class="fas fa-comment"></i> Abrir Chat (Probar Posici√≥n)
                </button>
                <button class="test-button" onclick="simulateViewports()">
                    <i class="fas fa-mobile-alt"></i> Simular Diferentes Pantallas
                </button>
                <button class="test-button" onclick="testKeyboardSpace()">
                    <i class="fas fa-keyboard"></i> Probar Espacio con Teclado
                </button>
                <button class="test-button" onclick="window.open('/portafolio/', '_blank')">
                    <i class="fas fa-external-link-alt"></i> Ir al Portfolio Principal
                </button>
            </div>

            <!-- Visual Comparison -->
            <div class="position-info">
                <h3><i class="fas fa-chart-line"></i> Comparaci√≥n Visual</h3>
                <div style="display: flex; justify-content: space-between; margin: 15px 0;">
                    <div style="text-align: center; flex: 1;">
                        <div style="color: #ff6b6b;"><strong>Antes</strong></div>
                        <div style="font-size: 12px;">Top: 174px</div>
                        <div style="font-size: 12px;">‚ùå Cuadro oculto</div>
                    </div>
                    <div style="text-align: center; flex: 1;">
                        <div style="color: #4CAF50;"><strong>Ahora</strong></div>
                        <div style="font-size: 12px;">Top: 120px/100px</div>
                        <div style="font-size: 12px;">‚úÖ Cuadro visible</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Elements -->
    <div id="chat-overlay" class="chat-overlay"></div>
    <div id="chat-toggle" class="chat-toggle" title="Chatear con IA sobre Jorge">
        <i class="fas fa-comments"></i>
    </div>

    <div id="chat-container" class="chat-container">
        <div class="chat-header">
            <div class="chat-header-content">
                <div class="chat-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="chat-info">
                    <h4>Chat Mejorado</h4>
                    <span class="chat-status">Posici√≥n optimizada para m√≥viles</span>
                </div>
            </div>
            <button id="chat-close" class="chat-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="chat-messages" id="chat-messages">
            <div class="message bot-message">
                <div class="message-content">
                    <p>üéâ ¬°Posici√≥n del chat mejorada para m√≥viles!</p>
                    <p>Ahora el cuadro de escribir es completamente visible en dispositivos m√≥viles:</p>
                    <ul>
                        <li>üì± Tablet (‚â§768px): Bot√≥n a 120px desde arriba</li>
                        <li>üì± M√≥vil (‚â§480px): Bot√≥n a 100px desde arriba</li>
                        <li>‚å®Ô∏è El √°rea de escritura ya no se oculta</li>
                        <li>‚ú® Mejor experiencia de usuario</li>
                    </ul>
                    <p><strong>¬°Prueba escribir un mensaje para verificar que todo funciona correctamente!</strong></p>
                </div>
                <div class="message-time"></div>
            </div>
        </div>
        
        <div class="chat-input-container">
            <div class="chat-input-wrapper">
                <textarea 
                    id="chat-input" 
                    placeholder="¬°Cuadro de escritura ahora completamente visible! üìù"
                    rows="1"
                    maxlength="1000"
                ></textarea>
                <button id="chat-send" class="chat-send-btn" title="Enviar mensaje">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
            <div class="chat-typing" id="chat-typing" style="display: none;">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </div>

    <script src="assets/js/chat.js"></script>
    <script>
        // Update viewport information
        function updateViewportInfo() {
            const width = window.innerWidth;
            const height = window.innerHeight;
            const orientation = width > height ? 'Landscape' : 'Portrait';
            
            let breakpoint;
            if (width <= 480) breakpoint = 'Small Mobile (‚â§480px)';
            else if (width <= 768) breakpoint = 'Mobile/Tablet (‚â§768px)';
            else breakpoint = 'Desktop (>768px)';
            
            document.getElementById('viewport-width').textContent = width;
            document.getElementById('viewport-height').textContent = height;
            document.getElementById('breakpoint').textContent = breakpoint;
            document.getElementById('orientation').textContent = orientation;
        }
        
        function openChatTest() {
            if (window.chatManager) {
                window.chatManager.openChat();
                
                // Add test message to show input visibility
                setTimeout(() => {
                    const messagesContainer = document.getElementById('chat-messages');
                    const testMessage = document.createElement('div');
                    testMessage.className = 'message bot-message';
                    testMessage.innerHTML = `
                        <div class="message-content">
                            <p>‚úÖ <strong>Chat abierto correctamente!</strong></p>
                            <p>Como puedes ver, el cuadro de escritura ahora est√° completamente visible y accesible en la parte inferior.</p>
                            <p>üìù <em>Intenta escribir algo para probar la funcionalidad.</em></p>
                        </div>
                        <div class="message-time">${new Date().toLocaleTimeString()}</div>
                    `;
                    messagesContainer.appendChild(testMessage);
                    window.chatManager.scrollToBottom();
                }, 500);
            }
        }
        
        function simulateViewports() {
            const viewports = [
                { width: 375, height: 667, name: 'iPhone SE' },
                { width: 414, height: 896, name: 'iPhone 11' },
                { width: 768, height: 1024, name: 'iPad' },
                { width: 1200, height: 800, name: 'Desktop' }
            ];
            
            let index = 0;
            const interval = setInterval(() => {
                if (index >= viewports.length) {
                    clearInterval(interval);
                    return;
                }
                
                const viewport = viewports[index];
                console.log(`Simulando ${viewport.name}: ${viewport.width}x${viewport.height}`);
                
                // In a real browser, this would require dev tools
                // For demonstration, we'll just log the information
                alert(`Simulando ${viewport.name}\n${viewport.width}x${viewport.height}\n\nEn cada tama√±o, el chat se posiciona optimalmente para mostrar el cuadro de escritura.`);
                
                index++;
            }, 2000);
        }
        
        function testKeyboardSpace() {
            alert('üí° Prueba del teclado:\n\n1. Abre el chat\n2. Toca el √°rea de escritura\n3. Verifica que el cuadro sigue visible cuando aparece el teclado virtual\n\n‚úÖ La nueva posici√≥n asegura que siempre tengas espacio para escribir!');
        }
        
        // Initialize viewport info and update on resize
        updateViewportInfo();
        window.addEventListener('resize', updateViewportInfo);
        window.addEventListener('orientationchange', () => {
            setTimeout(updateViewportInfo, 100);
        });
        
        // Auto-set message timestamp
        document.addEventListener('DOMContentLoaded', () => {
            const timeElements = document.querySelectorAll('.message-time');
            timeElements.forEach(el => {
                el.textContent = new Date().toLocaleTimeString();
            });
            
            console.log('üì± Mobile Chat Position Test initialized');
            console.log('üéØ New positions: Tablet 120px, Mobile 100px');
        });
    </script>
</body>
</html>
